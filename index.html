<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestor Financiero Personal</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="estilos.css">
  <script src="https://cdn.sheetjs.com/xlsx-0.19.3/package/dist/xlsx.full.min.js"></script>
</head>
<body>
  <header>
    <h1>Gestor Financiero Personal</h1>
  </header>

  <main class="container">
    <section class="contabilidad-container">
      <h2>Sistema Contable Básico</h2>
      
      <div class="formulario-contable">
        <form id="formTransaccion">
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <label for="tipoTransaccion">Tipo de Transacción</label>
                <select id="tipoTransaccion" class="form-control" required>
                  <option value="">Seleccione...</option>
                  <option value="ingreso">Ingreso</option>
                  <option value="egreso">Egreso</option>
                </select>
              </div>
              <div class="form-group">
                <label for="monto">Monto</label>
                <input type="number" id="monto" class="form-control" step="0.01" min="0" required>
              </div>
            </div>
            <div class="form-col">
              <div class="form-group">
                <label for="fecha">Fecha</label>
                <input type="date" id="fecha" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="descripcion">Descripción</label>
                <input type="text" id="descripcion" class="form-control" required>
              </div>
            </div>
          </div>
          <button type="submit" class="btn-primary">Registrar Transacción</button>
        </form>
      </div>

      <div class="lista-transacciones">
        <h3>Transacciones Registradas</h3>
        <table id="tablaTransacciones">
          <thead>
            <tr>
              <th>Tipo</th>
              <th>Monto</th>
              <th>Fecha</th>
              <th>Descripción</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="cuerpoTabla">
            <!-- Las transacciones se agregarán aquí dinámicamente -->
          </tbody>
        </table>
      </div>

      <div class="acciones">
        <button id="btnExportar" class="btn-success">
          <i class="bi bi-file-earmark-excel"></i> Exportar a Excel
        </button>
        <button id="btnReporte" class="btn-secondary">
          <i class="bi bi-file-earmark-text"></i> Generar Reporte
        </button>
        <button id="btnLimpiar" class="btn-danger">
          <i class="bi bi-trash"></i> Limpiar Registros
        </button>
      </div>

      <div class="resumen">
        <h3>Resumen Contable</h3>
        <div id="resumenContable">
          <p>Total Ingresos: <span id="totalIngresos">$0.00</span></p>
          <p>Total Egresos: <span id="totalEgresos">$0.00</span></p>
          <p>Balance General: <span id="balanceGeneral">$0.00</span></p>
          <p>IVA (19% sobre ingresos): <span id="totalIva">$0.00</span></p>
        </div>
      </div>

      <div id="reporteHTML" class="reporte-container" style="display: none;">
        <h3>Reporte Financiero</h3>
        <div id="contenidoReporte"></div>
        <button id="btnCerrarReporte" class="btn-secondary mt-3">Cerrar Reporte</button>
      </div>
    </section>
  </main>

  <footer>
    <p>Sistema de Gestión Financiera Personal &copy; <span id="currentYear"></span></p>
  </footer>

  <script src="app.js"></script>
</body>
</html>